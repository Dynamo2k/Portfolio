---
interface TimelineItem {
  title: string;
  company: string;
  period: string;
  description: string[];
  tech: string[];
}

interface Props {
  items: TimelineItem[];
}

const { items } = Astro.props;
---

<div class="relative">
  <div class="absolute left-4 md:left-8 top-0 bottom-0 w-px bg-accent-primary/20" aria-hidden="true"></div>
  <div class="space-y-8">
    {items.map((item, index) => (
      <div class="relative pl-12 md:pl-20">
        <div class="absolute left-2.5 md:left-6.5 top-1.5 w-3 h-3 rounded-full bg-accent-primary border-2 border-bg-primary" aria-hidden="true"></div>
        <div class="card">
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2">
            <h3 class="text-lg font-semibold text-text-primary">{item.title}</h3>
            <span class="text-sm text-accent-primary font-medium">{item.period}</span>
          </div>
          <p class="text-accent-secondary font-medium text-sm mb-3">{item.company}</p>
          <ul class="space-y-1.5 mb-3">
            {item.description.map((desc) => (
              <li class="text-text-secondary text-sm flex items-start gap-2">
                <span class="text-accent-primary mt-1 flex-shrink-0" aria-hidden="true">â–¸</span>
                <span>{desc}</span>
              </li>
            ))}
          </ul>
          {item.tech.length > 0 && (
            <div class="flex flex-wrap gap-2">
              {item.tech.map((t) => (
                <span class="text-xs px-2 py-1 bg-bg-elevated rounded text-text-muted font-mono">
                  {t}
                </span>
              ))}
            </div>
          )}
        </div>
      </div>
    ))}
  </div>
</div>
